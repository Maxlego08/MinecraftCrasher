package uwu.narumi.crasher.api.helper;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import uwu.narumi.crasher.api.exception.CommandException;
import uwu.narumi.crasher.api.exploit.Exploit;

public class ExploitHelper {

  private static Exploit<?> lastExploit;
  private static Object[] lastArgs;

  public static void submit(Exploit<?> exploit, Object[] args) throws CommandException  {
    ExecutorService executor = null;
    try {
      executor = Executors.newSingleThreadExecutor();
      executor.submit(() -> exploit.execute(args));
    } finally {
      if (executor != null) {
        executor.shutdown();
      }
    }
    lastExploit = exploit;
    lastArgs = args;
  }

  public static Exploit<?> getLastExploit() {
    return lastExploit;
  }

  public static Object[] getLastArgs() {
    return lastArgs;
  }
}
